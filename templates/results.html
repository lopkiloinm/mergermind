{% extends 'layout.html' %}

{% block content %}
<h1>Analysis Results</h1>
<div class="container">
  <ul>
    {% for item, result in results.items() %}
        <li>
            <strong>{{ item }}</strong>:
            <div class="markdown-content" id="content-{{ loop.index }}"></div>
            <script>
                (function() {
                    const markdownContent = {{ result | tojson }};
                    const htmlContent = marked.parse(markdownContent);
                    document.getElementById("content-{{ loop.index }}").innerHTML = htmlContent;
                })();
            </script>
        </li>
    {% endfor %}
  </ul>
  <a href="{{ url_for('due_diligence') }}">Upload another PDF</a>
</div>
{% endblock %}